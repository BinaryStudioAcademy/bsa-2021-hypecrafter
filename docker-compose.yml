version: '3'
services:
  gateway:
    build:
      image: "mihailts/hypecrafter-gateway"
    volumes:
      - ./gateway:/app/gateway/
      - ./shared:/app/shared/
    env_file:
      - .env
  backend:
    depends_on:
      - gateway
    build:
      image: "mihailts/hypecrafter-backend"
    volumes:
      - ./backend:/app/backend/
      - ./shared:/app/shared/
  env_file:
    - .env
  frontend:
    stdin_open: true
    build:
      image: "mihailts/hypecrafter-frontend"
    volumes:
      - ./frontend:/app
  nginx:
    depends_on:
      - frontend
      - gateway
      - backend
    restart: always
    build:
      image: "mihailts/hypecrafter-nginx"
    ports:
      - '80:80'
